{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _imagesloaded = _interopRequireDefault(require(\"imagesloaded\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar FlickityComponent = /*#__PURE__*/function (_Component) {\n  _inherits(FlickityComponent, _Component);\n\n  var _super = _createSuper(FlickityComponent);\n\n  function FlickityComponent(props) {\n    var _this;\n\n    _classCallCheck(this, FlickityComponent);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      flickityReady: false,\n      flickityCreated: false,\n      cellCount: 0\n    };\n    _this.carousel = null;\n    _this.flkty = null;\n    return _this;\n  }\n\n  _createClass(FlickityComponent, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          children = _this$props.children,\n          _this$props$options = _this$props.options,\n          draggable = _this$props$options.draggable,\n          initialIndex = _this$props$options.initialIndex,\n          reloadOnUpdate = _this$props.reloadOnUpdate,\n          disableImagesLoaded = _this$props.disableImagesLoaded;\n      var flickityReady = this.state.flickityReady;\n\n      if (reloadOnUpdate || !prevState.flickityReady && flickityReady) {\n        var isActive = this.flkty.isActive;\n        this.flkty.deactivate();\n        this.flkty.selectedIndex = initialIndex || 0;\n        this.flkty.options.draggable = draggable === undefined ? children ? children.length > 1 : false : draggable;\n        if (isActive) this.flkty.activate();\n\n        if (!disableImagesLoaded && this.carousel) {\n          (0, _imagesloaded[\"default\"])(this.carousel, function () {\n            _this2.flkty.reloadCells();\n          });\n        }\n      } else {\n        this.flkty.reloadCells();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!canUseDOM) return null;\n\n      var Flickity = require('flickity');\n\n      var _this$props2 = this.props,\n          flickityRef = _this$props2.flickityRef,\n          options = _this$props2.options;\n      this.flkty = new Flickity(this.carousel, options);\n      if (flickityRef) flickityRef(this.flkty);\n\n      if (this.props[\"static\"]) {\n        this.setReady();\n      } else {\n        this.setState({\n          flickityCreated: true\n        });\n      }\n    }\n  }, {\n    key: \"setReady\",\n    value: function setReady() {\n      var _this3 = this;\n\n      if (this.state.flickityReady) return;\n\n      var setFlickityToReady = function setFlickityToReady() {\n        return _this3.setState({\n          flickityReady: true\n        });\n      };\n\n      if (this.props.disableImagesLoaded) setFlickityToReady();else (0, _imagesloaded[\"default\"])(this.carousel, setFlickityToReady);\n    }\n  }, {\n    key: \"renderPortal\",\n    value: function renderPortal() {\n      var _this4 = this;\n\n      if (!this.carousel) return null;\n      var mountNode = this.carousel.querySelector('.flickity-slider');\n\n      if (mountNode) {\n        var element = /*#__PURE__*/(0, _reactDom.createPortal)(this.props.children, mountNode);\n        setTimeout(function () {\n          return _this4.setReady();\n        }, 0);\n        return element;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(this.props.elementType, {\n        className: this.props.className,\n        ref: function ref(c) {\n          _this5.carousel = c;\n        }\n      }, this.props[\"static\"] ? this.props.children : this.renderPortal());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var cellCount = _react[\"default\"].Children.count(props.children);\n\n      if (cellCount !== state.cellCount) return {\n        flickityReady: false,\n        cellCount: cellCount\n      };\n      return null;\n    }\n  }]);\n\n  return FlickityComponent;\n}(_react.Component);\n\nFlickityComponent.propTypes = {\n  children: _propTypes[\"default\"].array,\n  className: _propTypes[\"default\"].string,\n  disableImagesLoaded: _propTypes[\"default\"].bool,\n  elementType: _propTypes[\"default\"].string,\n  flickityRef: _propTypes[\"default\"].func,\n  options: _propTypes[\"default\"].object,\n  reloadOnUpdate: _propTypes[\"default\"].bool,\n  \"static\": _propTypes[\"default\"].bool\n};\nFlickityComponent.defaultProps = {\n  className: '',\n  disableImagesLoaded: false,\n  elementType: 'div',\n  options: {},\n  reloadOnUpdate: false,\n  \"static\": false\n};\nvar _default = FlickityComponent;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["../src/index.js"],"names":["canUseDOM","window","FlickityComponent","Component","flickityReady","flickityCreated","cellCount","props","state","React","prevProps","prevState","children","draggable","initialIndex","reloadOnUpdate","disableImagesLoaded","isActive","Flickity","require","flickityRef","options","setFlickityToReady","mountNode","element","setTimeout","className","ref","PropTypes","elementType","bool"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport imagesloaded from 'imagesloaded';\nimport PropTypes from 'prop-types';\n\nconst canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\nclass FlickityComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      flickityReady: false,\n      flickityCreated: false,\n      cellCount: 0,\n    };\n\n    this.carousel = null;\n    this.flkty = null;\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const cellCount = React.Children.count(props.children);\n    if (cellCount !== state.cellCount)\n      return { flickityReady: false, cellCount };\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      children,\n      options: { draggable, initialIndex },\n      reloadOnUpdate,\n      disableImagesLoaded,\n    } = this.props;\n    const { flickityReady } = this.state;\n    if (reloadOnUpdate || (!prevState.flickityReady && flickityReady)) {\n      const isActive = this.flkty.isActive;\n      this.flkty.deactivate();\n      this.flkty.selectedIndex = initialIndex || 0;\n      this.flkty.options.draggable =\n        draggable === undefined\n          ? children\n            ? children.length > 1\n            : false\n          : draggable;\n      if (isActive) this.flkty.activate();\n      if (!disableImagesLoaded && this.carousel) {\n        imagesloaded(this.carousel, () => {\n          this.flkty.reloadCells();\n        });\n      }\n    } else {\n      this.flkty.reloadCells();\n    }\n  }\n\n  componentDidMount() {\n    if (!canUseDOM) return null;\n    const Flickity = require('flickity');\n    const { flickityRef, options } = this.props;\n    this.flkty = new Flickity(this.carousel, options);\n    if (flickityRef) flickityRef(this.flkty);\n    if (this.props.static) {\n      this.setReady();\n    } else {\n      this.setState({ flickityCreated: true });\n    }\n  }\n\n  setReady() {\n    if (this.state.flickityReady) return;\n    const setFlickityToReady = () => this.setState({ flickityReady: true });\n    if (this.props.disableImagesLoaded) setFlickityToReady();\n    else imagesloaded(this.carousel, setFlickityToReady);\n  }\n\n  renderPortal() {\n    if (!this.carousel) return null;\n    const mountNode = this.carousel.querySelector('.flickity-slider');\n    if (mountNode) {\n      const element = createPortal(this.props.children, mountNode);\n      setTimeout(() => this.setReady(), 0);\n      return element;\n    }\n  }\n\n  render() {\n    return React.createElement(\n      this.props.elementType,\n      {\n        className: this.props.className,\n        ref: (c) => {\n          this.carousel = c;\n        },\n      },\n      this.props.static ? this.props.children : this.renderPortal()\n    );\n  }\n}\n\nFlickityComponent.propTypes = {\n  children: PropTypes.array,\n  className: PropTypes.string,\n  disableImagesLoaded: PropTypes.bool,\n  elementType: PropTypes.string,\n  flickityRef: PropTypes.func,\n  options: PropTypes.object,\n  reloadOnUpdate: PropTypes.bool,\n  static: PropTypes.bool,\n};\n\nFlickityComponent.defaultProps = {\n  className: '',\n  disableImagesLoaded: false,\n  elementType: 'div',\n  options: {},\n  reloadOnUpdate: false,\n  static: false,\n};\n\nexport default FlickityComponent;\n"]},"metadata":{},"sourceType":"script"}